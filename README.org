We are going to use supabase but querying it through api so no js client needed and changing to other system would be easier.

** Queries

**** Matches
They are sorted by /played_at/ field.

#+BEGIN_SRC bash
curl 'https://orqwiubnozfouaqyywah.supabase.co/rest/v1/CLOSSPAD_match?select=*&order=played_at.asc' \
    -H "apikey: SUPABASE_CLIENT_ANON_KEY" \
    -H "Authorization: Bearer SUPABASE_CLIENT_ANON_KEY"
#+END_SRC


** Tasks [7/12]

*** DONE [#A] BUG next day
when clicked in the last one 1-1-1970 is selected, and no disable working
*** DONE [#A] Review code
/event-handler/ code structure in replicant examples to use some of the ideas there.
*** DONE [#A] BUG deploy.sh
main.js no se están versionando/modificando -> subiendo
*** DONE [#A] BUG POST route typo
changed :route/push :route/unkown to [:route :match {:date (-> added-match :played_at)}] in supabase.cljs:71. Removed dead :route/unkown case in effects.cljs:39.
*** DONE [#A] BUG POST no data refresh
Added user-friendly-error function with error detection (timeout/abort → "Error de conexión: tiempo de espera agotado", network → "Error de conexión con Supabase", duplicate → "El partido ya existe", default → "Error al guardar el partido"). Updated login error handling (supabase.cljs:33) and POST failure callback (supabase.cljs:98) to use user-friendly-error. Added [:data/query] dispatch after successful POST (supabase.cljs:101) to refresh data from Supabase before navigation.
*** DONE [#A] BUG POST missing error handler
Added :data/error event handler (events.cljs:61-62) that sets error state and clears :is-loading? on errors.
*** DONE [#A] BUG POST error handling
Updated login error handling and POST failure callback to use user-friendly-error function. Error toast will display user-friendly messages with :show-details flag for technical details.
*** DONE [#A] BUG POST button loading state
Added :disabled (:is-loading? state) attribute to submit button with conditional rendering of spinner + "Procesando..." during loading state (add/view.cljs:117-123). Prevents double-submit during POST→query→navigate flow.
*** TODO [#C] POST error toast technical details
Enhance error toast with "Mostrar detalles técnicos" checkbox to toggle display of full error information in ui/elements.cljc
*** TODO [#A] Better keywordization
so =played_at= becomes =played-at=. Do not use libraries but code from scratch.
*** TODO [#B] Load session on start
when app is first time loaded/rendered, it must read from localStorage the session from supabase and save into atom dispatching.
*** TODO [#B] Rows animations
using some js library so I can learn js interop too.
*** TODO [#B] Adding configuration
and save into local storage with some /effect/.
*** TODO [#B] BUG POST no success feedback
add toast notification after successful POST. Users don't know if match was saved.
*** TODO [#C] Rating system configurable
through some dialog or expandible widget.
*** DONE [#C] Clean up dead code
removed commented :post/fx.match code in effects.cljs:50.



** Pages

*** =GET= Matches/classification
/match/2025-04-07
merge
